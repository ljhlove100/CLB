<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.myapp">
       
    <select id="UsersCheck" resultType="int" parameterType="hashMap">
		<![CDATA[
		SELECT
			count(*) 
		FROM
			users			
		WHERE
			users_id=#{users_id}
		AND
			users_pw=#{users_pw}
 		]]>
	</select>
	
    <select id="LoginInfo" resultType="com.spring.myapp.model.Users" parameterType="hashMap">
      <![CDATA[  
        SELECT
			users_no,
			users_id,
			users_pw,
			users_name,
			users_power,
			update_date,
			insert_date
		FROM
			users
		WHERE
			users_id=#{users_id}
		AND
			users_pw=#{users_pw}	
		]]>
    </select> 
    
    <select id="getUsersList" resultType="com.spring.myapp.model.Users">
      <![CDATA[  
        SELECT
			users_no,
			users_id,
			users_pw,
			users_name,
			users_power,
			update_date,
			insert_date
		FROM
			users
		]]>
    </select>     
    
    <select id="getTotalUsersCnt" resultType="int" parameterType="hashMap" >       
		SELECT count(*) as count
		FROM users		
		<where>
		    <if test="word != null and search == 'all'">
		        users_id like concat('%', #{word}, '%') OR users_name like concat('%', #{word}, '%')
		    </if>	   		    
		    <if test="word != null and search == 'users_id'">
		        users_id like concat('%', #{word}, '%') 
		    </if>
		    <if test="word != null and search == 'users_name'">
		        users_name like concat('%', #{word}, '%')
		    </if>
		</where>				
	</select>
	
     <select id="getAllUsers" resultType="com.spring.myapp.model.Users" parameterType="hashMap" >       
		SELECT
			users_no,
			users_id,
			users_pw,
			users_name,
			users_power,
			update_date,
			insert_date
		FROM
			users	
		<where>
		    <if test="word != null and search == 'all'">
		        (users_id like concat('%', #{word}, '%') OR users_name like concat('%', #{word}, '%')) AND ROWNUM BETWEEN ((#{curPage}-1) * 10) + 1 and #{curPage}*10
		    </if>
		    <if test="word != null and search == 'users_id'">
		        users_id like concat('%', #{word}, '%') AND ROWNUM BETWEEN ((#{curPage}-1) * 10) + 1 and #{curPage}*10
		    </if>
		    <if test="word != null and search == 'users_name'">
		        users_name like concat('%', #{word}, '%') AND ROWNUM BETWEEN ((#{curPage}-1) * 10) + 1 and #{curPage}*10
		    </if>
		    <if test="word == null">
		        ROWNUM BETWEEN ((#{curPage}-1) * 10) + 1 and #{curPage}*10
		    </if>
		</where>
	</select>
	
     <select id="getUsersInfo" resultType="com.spring.myapp.model.Users" parameterType="hashMap">
      <![CDATA[  
        SELECT
			users_no,
			users_id,
			users_name,
			update_date,
			write_date
		FROM
			users
		WHERE
			users_id=#{users_id}		
		]]>
    </select>  
    
     
     
     
     <select id="getUsersName" resultType="string" parameterType="hashMap">
		<![CDATA[
		SELECT
			users_name
		FROM
			users			
		WHERE
			users_id=#{users_id}
 		]]>
	</select>
	
     <select id="getUsersDepartment" resultType="string" parameterType="hashMap">
		<![CDATA[
		SELECT
			department
		FROM
			users			
		WHERE
			users_id=#{users_id}		
 		]]>
	</select>
	
     <select id="getUsersCompany" resultType="string" parameterType="hashMap">
		<![CDATA[
		SELECT
			company
		FROM
			users			
		WHERE
			users_id=#{users_id}		
 		]]>
	</select>
	
     <select id="getUsersTeam" resultType="string" parameterType="hashMap">
		<![CDATA[
		SELECT
			team 
		FROM
			users			
		WHERE
			users_id=#{users_id}		
 		]]>
	</select>
	
     <select id="getUsersPosition" resultType="string" parameterType="hashMap">
		<![CDATA[
		SELECT
			position
		FROM
			users			
		WHERE
			users_id=#{users_id}		
 		]]>
	</select>
    
</mapper>
